<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta property="og:title" content="Formulir Pendaftran santri Dayah Madinatuddiniyah Babussalam">
    <meta property="og:description" content="Klik disini untuk mendaftar di Dayah Madinatuddiniyah Babussalam">
    <meta property="og:image" content="/Brosur.jpg">
    <meta property="og:url" content="https:madinatuddiniyahbabussalam.dayah.id">
    <meta property="og:type" content="website">

    <!-- Untuk WhatsApp & Telegram -->
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <title>Formulir Pendaftaran Santri - Dayah Madinatuddiniyah Babussalam</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f9ff;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            background-image: linear-gradient(to bottom, #e6f0ff, #f5f9ff);
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 64, 128, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(to right, #046831, #0a611d);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, #f0b429, #f0b429 50%, #06690e 50%);
        }
        
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: white;
            padding: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo img {
            max-width: 100%;
            max-height: 100%;
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
            font-weight: 700;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            font-weight: 300;
        }
        
        .form-container {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #03530e;
            font-size: 1rem;
        }
        
        .required::after {
            content: " *";
            color: #e01b24;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #e1e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background-color: #f9fbfe;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #096606;
            box-shadow: 0 0 0 3px rgba(45, 135, 240, 0.2);
            background-color: white;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 5px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
        }
        
        .radio-option input {
            width: auto;
            margin-right: 8px;
        }
        
        .radio-option label {
            margin-bottom: 0;
            font-weight: normal;
        }
        
        .conditional-fields {
            border-left: 4px solid #034d15;
            padding-left: 15px;
            margin-top: 20px;
            background-color: #f9fbfe;
            padding: 20px;
            border-radius: 0 8px 8px 0;
            display: none;
        }
        
        .conditional-fields.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .button-container {
            text-align: center;
            margin-top: 40px;
        }
        
        .btn-submit {
            background: linear-gradient(to right, #179c05, #127405);
            color: white;
            border: none;
            padding: 16px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(45, 240, 77, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-submit:hover {
            background: linear-gradient(to right, #127c03, #179c05);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(71, 156, 21, 0.4);
        }
        
        .btn-submit:active {
            transform: translateY(0);
        }
        
        .validation-message {
            color: #e01b24;
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }
        
        .validation-message.show {
            display: block;
        }
        
        .success-message {
            display: none;
            text-align: center;
            padding: 40px;
            background-color: #f0fff4;
            border-radius: 10px;
            border-left: 5px solid #38a169;
            margin-top: 30px;
        }
        
        .success-message.show {
            display: block;
            animation: fadeIn 0.8s ease;
        }
        
        .success-icon {
            font-size: 3.5rem;
            color: #38a169;
            margin-bottom: 20px;
        }
        
        .success-message h3 {
            color: #2d8748;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #e1e8f0;
            margin-top: 30px;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .radio-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .form-container {
                padding: 20px;
            }
        }
        
        .info-text {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
            font-style: italic;
        }
        
        .field-icon {
            color: #165506;
            margin-right: 8px;
        }
        
        .hidden-iframe {
            display: none;
            width: 0;
            height: 0;
            border: none;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .loading-overlay.show {
            display: flex;
        }
        
        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #1c5c03;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-container">
                <div class="logo">
                    <img src="https://madinatuddiniyahbabussalam.dayah.id/media/2021.09/logo-dyah21.png" alt="Logo Dayah Madinatuddiniyah Babussalam">
                </div>
            </div>
            <h1>FORMULIR PENDAFTARAN SANTRI</h1>
            <div class="subtitle">Dayah Madinatuddiniyah Babussalam â€¢ Tahun Ajaran 2026-2027</div>
        </div>
        
        <div class="form-container">
            <form id="registrationForm" method="POST" action="https://docs.google.com/forms/d/e/1FAIpQLScHIFwmWULHDSedD4d4j_zzgpFCwncoq4px-c5xH9MreAlRRA/formResponse" target="hidden-iframe">
                <!-- Baris 1: Nama Lengkap -->
                <div class="form-group">
                    <label for="namaLengkap" class="required">
                        <i class="fas fa-user field-icon"></i>Nama Lengkap
                    </label>
                    <input type="text" id="namaLengkap" name="entry.1480274109" placeholder="Masukkan nama lengkap Santri" required>
                    <div class="validation-message" id="namaValidation">Nama lengkap harus diisi</div>
                </div>
                
                <!-- Baris 2: Jenis Kelamin dan Tempat Lahir -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="jenisKelamin" class="required">
                            <i class="fas fa-venus-mars field-icon"></i>Jenis Kelamin
                        </label>
                        <select id="jenisKelamin" name="entry.1924791872" required>
                            <option value="">Pilih Jenis Kelamin</option>
                            <option value="Laki-Laki">Laki-Laki</option>
                            <option value="Perempuan">Perempuan</option>
                        </select>
                        <div class="validation-message" id="jenisKelaminValidation">Jenis kelamin harus dipilih</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="tempatLahir" class="required">
                            <i class="fas fa-map-marker-alt field-icon"></i>Tempat Lahir
                        </label>
                        <input type="text" id="tempatLahir" name="entry.1307233389" placeholder="Kota/kabupaten tempat lahir" required>
                        <div class="validation-message" id="tempatLahirValidation">Tempat lahir harus diisi</div>
                    </div>
                </div>
                
                <!-- Baris 3: Tanggal Lahir -->
                <div class="form-group">
                    <label for="tanggalLahir" class="required">
                        <i class="fas fa-calendar-alt field-icon"></i>Tanggal Lahir
                    </label>
                    <input type="date" id="tanggalLahir" name="entry.1206631176" required>
                    <div class="validation-message" id="tanggalLahirValidation">Tanggal lahir harus diisi</div>
                </div>
                
                <!-- Baris 4: Alamat -->
                <div class="form-group">
                    <label for="alamat" class="required">
                        <i class="fas fa-home field-icon"></i>Alamat
                    </label>
                    <textarea id="alamat" name="entry.788720173" placeholder="Alamat Santri" required></textarea>
                    <div class="validation-message" id="alamatValidation">Alamat harus diisi</div>
                </div>
                
                <!-- Baris 5: Sekolah Asal -->
                <div class="form-group">
                    <label for="sekolahAsal" class="required">
                        <i class="fas fa-school field-icon"></i>Sekolah Asal
                    </label>
                    <input type="text" id="sekolahAsal" name="entry.42072178" placeholder="Nama sekolah sebelumnya" required>
                    <div class="validation-message" id="sekolahAsalValidation">Sekolah asal harus diisi</div>
                </div>
                
                <!-- Baris 6: Pernah Mengaji di Dayah Lain? -->
                <div class="form-group">
                    <label class="required">
                        <i class="fas fa-question-circle field-icon"></i>Pernah mengaji di dayah lain?
                    </label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="pernahMengajiYa" name="pernahMengaji" value="Ya" required>
                            <label for="pernahMengajiYa">Ya</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pernahMengajiTidak" name="pernahMengaji" value="Tidak" required>
                            <label for="pernahMengajiTidak">Tidak</label>
                        </div>
                    </div>
                    <div class="validation-message" id="pernahMengajiValidation">Pertanyaan ini harus dijawab</div>
                </div>
                
                <!-- Conditional Fields: Nama Dayah Sebelumnya dan Lama Mengaji -->
                <div id="conditionalFields" class="conditional-fields">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="namaDayahSebelumnya">
                                <i class="fas fa-mosque field-icon"></i>Nama Dayah Sebelumnya
                            </label>
                            <input type="text" id="namaDayahSebelumnya" name="entry.1084252527" placeholder="Nama dayah tempat mengaji sebelumnya">
                        </div>
                        
                        <div class="form-group">
                            <label for="lamaMengaji">
                                <i class="fas fa-clock field-icon"></i>Lama Mengaji di Dayah Sebelumnya
                            </label>
                            <select id="lamaMengaji" name="entry.713839622">
                                <option value="">Pilih Lama Mengaji</option>
                                <option value="1 Tahun">1 Tahun</option>
                                <option value="2 Tahun">2 Tahun</option>
                                <option value="3 Tahun">3 Tahun</option>
                                <option value="4 Tahun">4 Tahun</option>
                                <option value="5 Tahun">5 Tahun</option>
                                <option value="6 Tahun">6 Tahun</option>
                                <option value="7 Tahun">7 Tahun</option>
                                <option value="8 Tahun">8 Tahun</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Baris 7: Jenjang yang Dituju -->
                <div class="form-group">
                    <label for="jenjangDituju" class="required">
                        <i class="fas fa-graduation-cap field-icon"></i>Jenjang yang Dituju
                    </label>
                    <select id="jenjangDituju" name="entry.789339613" required>
                        <option value="">Pilih Jenjang Pendidikan</option>
                        <option value="Sekolah Menengah Pertama (SMP)">Sekolah Menengah Pertama (SMP)</option>
                        <option value="Sekolah Menengah Akhir (SMA)">Sekolah Menengah Akhir (SMA)</option>
                        <option value="Salafi (Hanya Mengaji)">Salafi (Hanya Mengaji)</option>
                    </select>
                    <div class="validation-message" id="jenjangDitujuValidation">Jenjang yang dituju harus dipilih</div>
                </div>
                
                <!-- Baris 8: Nama Ayah dan Ibu -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="namaAyah" class="required">
                            <i class="fas fa-male field-icon"></i>Nama Ayah
                        </label>
                        <input type="text" id="namaAyah" name="entry.564559975" placeholder="Nama lengkap ayah kandung" required>
                        <div class="validation-message" id="namaAyahValidation">Nama ayah harus diisi</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="namaIbu" class="required">
                            <i class="fas fa-female field-icon"></i>Nama Ibu
                        </label>
                        <input type="text" id="namaIbu" name="entry.759597115" placeholder="Nama lengkap ibu kandung" required>
                        <div class="validation-message" id="namaIbuValidation">Nama ibu harus diisi</div>
                    </div>
                </div>
                
                <!-- Baris 9: Nomor WhatsApp -->
                <div class="form-group">
                    <label for="whatsapp" class="required">
                        <i class="fab fa-whatsapp field-icon"></i>Nomor WhatsApp Aktif
                    </label>
                    <input type="text" id="whatsapp" name="entry.751292967" placeholder="Contoh: 081234567890" required>
                    <div class="validation-message" id="whatsappValidation">Nomor WhatsApp harus diisi (minimal 10 digit)</div>
                </div>
                
                <!-- Button Submit -->
                <div class="button-container">
                    <button type="submit" id="submitBtn" class="btn-submit">
                        <i class="fas fa-paper-plane"></i> Daftar Sekarang
                    </button>
                </div>
            </form>
            
            <!-- Success Message -->
            <div id="successMessage" class="success-message">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3>Terima Kasih!</h3>
                <p>Data pendaftaran Anda telah berhasil kami terima.</p>
                <p>Tim Dayah Madinatuddiniyah Babussalam akan menghubungi Anda melalui WhatsApp untuk informasi selanjutnya.</p>
                <p style="margin-top: 15px; font-weight: 600; color: #185a04;">Semoga Allah memudahkan segala urusan kita. Aamiin.</p>
                <button id="resetFormBtn" class="btn-submit" style="margin-top: 20px; background: linear-gradient(to right, #38a169, #48bb78);">
                    <i class="fas fa-redo"></i> Daftarkan Santri Lain
                </button>
            </div>
        </div>
        
        <div class="footer">
            <p>Dayah Madinatuddiniyah Babussalam &copy; 2026</p>
            <p>Jl. Pesantren, Kp Puja Mulia, Kec. Bandar, Kab. Bener Meriah, Prov. Aceh 24582</p>
        </div>
    </div>

    <!-- Hidden iframe for Google Form submission -->
    <iframe name="hidden-iframe" class="hidden-iframe"></iframe>
    
    <!-- Loading overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <div style="margin-left: 15px; font-weight: 600; color: #1a5fb4;">Mengirim data ...</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Referensi elemen form
            const form = document.getElementById('registrationForm');
            const conditionalFields = document.getElementById('conditionalFields');
            const pernahMengajiYa = document.getElementById('pernahMengajiYa');
            const pernahMengajiTidak = document.getElementById('pernahMengajiTidak');
            const successMessage = document.getElementById('successMessage');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const resetFormBtn = document.getElementById('resetFormBtn');
            
            // Tampilkan conditional fields jika "Ya" dipilih
            pernahMengajiYa.addEventListener('change', function() {
                if (this.checked) {
                    conditionalFields.classList.add('show');
                    document.getElementById('namaDayahSebelumnya').setAttribute('required', 'required');
                    document.getElementById('lamaMengaji').setAttribute('required', 'required');
                }
            });
            
            // Sembunyikan conditional fields jika "Tidak" dipilih
            pernahMengajiTidak.addEventListener('change', function() {
                if (this.checked) {
                    conditionalFields.classList.remove('show');
                    document.getElementById('namaDayahSebelumnya').removeAttribute('required');
                    document.getElementById('lamaMengaji').removeAttribute('required');
                    document.getElementById('namaDayahSebelumnya').value = '';
                    document.getElementById('lamaMengaji').value = '';
                }
            });
            
            // Validasi form sebelum submit
            function validateForm() {
                let isValid = true;
                
                // Reset validasi
                const validationMessages = document.querySelectorAll('.validation-message');
                validationMessages.forEach(msg => {
                    msg.classList.remove('show');
                });
                
                // Validasi nama lengkap
                const namaLengkap = document.getElementById('namaLengkap').value.trim();
                if (!namaLengkap) {
                    document.getElementById('namaValidation').classList.add('show');
                    isValid = false;
                }
                
                // Validasi jenis kelamin
                const jenisKelamin = document.getElementById('jenisKelamin').value;
                if (!jenisKelamin) {
                    document.getElementById('jenisKelaminValidation').classList.add('show');
                    isValid = false;
                }
                
                // Validasi tempat lahir
                const tempatLahir = document.getElementById('tempatLahir').value.trim();
                if (!tempatLahir) {
                    document.getElementById('tempatLahirValidation').classList.add('show');
                    isValid = false;
                }
                
                // Validasi tanggal lahir
                const tanggalLahir = document.getElementById('tanggalLahir').value;
                if (!tanggalLahir) {
                    document.getElementById('tanggalLahirValidation').classList.add('show');
                    isValid = false;
                }
                
                // Validasi alamat
                const alamat = document.getElementById('alamat').value.trim();
                if (!alamat) {
                    document.getElementById('alamatValidation').classList.add('show');
                    isValid = false;
                }
                
                // Validasi sekolah asal
                const sekolahAsal = document.getElementById('sekolahAsal').value.trim();
                if (!sekolahAsal) {
                    document.getElementById('sekolahAsalValidation').classList.add('show');
                    isValid = false;
                }
                
                // Validasi pernah mengaji di dayah lain
                const pernahMengaji = document.querySelector('input[name="pernahMengaji"]:checked');
                if (!pernahMengaji) {
                    document.getElementById('pernahMengajiValidation').classList.add('show');
                    isValid = false;
                }
                
                // Validasi nama dayah sebelumnya jika diperlukan
                if (pernahMengajiYa.checked) {
                    const namaDayahSebelumnya = document.getElementById('namaDayahSebelumnya').value.trim();
                    if (!namaDayahSebelumnya) {
                        alert("Mohon isi nama dayah sebelumnya karena Anda memilih 'Ya' untuk pernah mengaji di dayah lain.");
                        isValid = false;
                    }
                    
                    const lamaMengaji = document.getElementById('lamaMengaji').value;
                    if (!lamaMengaji) {
                        alert("Mohon pilih lama mengaji di dayah sebelumnya.");
                        isValid = false;
                    }
                }
                
                // Validasi jenjang yang dituju
                const jenjangDituju = document.getElementById('jenjangDituju').value;
                if (!jenjangDituju) {
                    document.getElementById('jenjangDitujuValidation').classList.add('show');
                    isValid = false;
                }
                
                // Validasi nama ayah
                const namaAyah = document.getElementById('namaAyah').value.trim();
                if (!namaAyah) {
                    document.getElementById('namaAyahValidation').classList.add('show');
                    isValid = false;
                }
                
                // Validasi nama ibu
                const namaIbu = document.getElementById('namaIbu').value.trim();
                if (!namaIbu) {
                    document.getElementById('namaIbuValidation').classList.add('show');
                    isValid = false;
                }
                
                // Validasi nomor WhatsApp
                const whatsapp = document.getElementById('whatsapp').value.trim();
                const whatsappRegex = /^[0-9]{10,15}$/;
                if (!whatsapp) {
                    document.getElementById('whatsappValidation').textContent = 'Nomor WhatsApp harus diisi';
                    document.getElementById('whatsappValidation').classList.add('show');
                    isValid = false;
                } else if (!whatsappRegex.test(whatsapp)) {
                    document.getElementById('whatsappValidation').textContent = 'Nomor WhatsApp harus berisi 10-15 digit angka';
                    document.getElementById('whatsappValidation').classList.add('show');
                    isValid = false;
                }
                
                return isValid;
            }
            
            // Tangani submit form
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (validateForm()) {
                    // Tampilkan loading overlay
                    loadingOverlay.classList.add('show');
                    
                    // Submit form ke Google Forms melalui iframe
                    // Karena Google Forms memiliki mekanisme keamanan yang ketat,
                    // kita akan menggunakan pendekatan alternatif
                    submitToGoogleForms();
                } else {
                    // Scroll ke field pertama yang error
                    const firstError = document.querySelector('.validation-message.show');
                    if (firstError) {
                        firstError.closest('.form-group').scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            });
            
            // Fungsi untuk mengirim data ke Google Forms
            function submitToGoogleForms() {
                // Kumpulkan data dari form
                const formData = {
                    'entry.1480274109': document.getElementById('namaLengkap').value.trim(),
                    'entry.1924791872': document.getElementById('jenisKelamin').value,
                    'entry.1307233389': document.getElementById('tempatLahir').value.trim(),
                    'entry.1206631176': document.getElementById('tanggalLahir').value,
                    'entry.788720173': document.getElementById('alamat').value.trim(),
                    'entry.42072178': document.getElementById('sekolahAsal').value.trim(),
                    'entry.1084252527': document.getElementById('namaDayahSebelumnya').value.trim(),
                    'entry.713839622': document.getElementById('lamaMengaji').value,
                    'entry.789339613': document.getElementById('jenjangDituju').value,
                    'entry.564559975': document.getElementById('namaAyah').value.trim(),
                    'entry.759597115': document.getElementById('namaIbu').value.trim(),
                    'entry.751292967': document.getElementById('whatsapp').value.trim()
                };
                
                // Buat URL dengan parameter untuk Google Form
                const googleFormUrl = 'https://docs.google.com/forms/d/e/1FAIpQLScHIFwmWULHDSedD4d4j_zzgpFCwncoq4px-c5xH9MreAlRRA/formResponse?' +
                    'usp=pp_url&' +
                    `entry.1480274109=${encodeURIComponent(formData['entry.1480274109'])}&` +
                    `entry.1924791872=${encodeURIComponent(formData['entry.1924791872'])}&` +
                    `entry.1307233389=${encodeURIComponent(formData['entry.1307233389'])}&` +
                    `entry.1206631176=${encodeURIComponent(formData['entry.1206631176'])}&` +
                    `entry.788720173=${encodeURIComponent(formData['entry.788720173'])}&` +
                    `entry.42072178=${encodeURIComponent(formData['entry.42072178'])}&` +
                    `entry.1084252527=${encodeURIComponent(formData['entry.1084252527'])}&` +
                    `entry.713839622=${encodeURIComponent(formData['entry.713839622'])}&` +
                    `entry.789339613=${encodeURIComponent(formData['entry.789339613'])}&` +
                    `entry.564559975=${encodeURIComponent(formData['entry.564559975'])}&` +
                    `entry.759597115=${encodeURIComponent(formData['entry.759597115'])}&` +
                    `entry.751292967=${encodeURIComponent(formData['entry.751292967'])}`;
                
                // Simpan data ke localStorage sebagai backup
                const submissions = JSON.parse(localStorage.getItem('dayahSubmissions') || '[]');
                const submission = {
                    ...formData,
                    timestamp: new Date().toISOString()
                };
                submissions.push(submission);
                localStorage.setItem('dayahSubmissions', JSON.stringify(submissions));
                
                // Coba kirim data ke Google Forms menggunakan fetch dengan mode 'no-cors'
                // Ini adalah cara yang lebih dapat diandalkan
                fetch(googleFormUrl, {
                    mode: 'no-cors',
                    method: 'GET'
                })
                .then(() => {
                    // Berhasil mengirim (meskipun kita tidak bisa membaca respons karena 'no-cors')
                    setTimeout(() => {
                        loadingOverlay.classList.remove('show');
                        successMessage.classList.add('show');
                        form.reset();
                        conditionalFields.classList.remove('show');
                        
                        // Scroll ke pesan sukses
                        successMessage.scrollIntoView({ behavior: 'smooth' });
                        
                        // Log data yang dikirim ke console untuk keperluan debugging
                        console.log('Data berhasil dikirim ke Google Forms:', formData);
                        console.log('Data juga disimpan di localStorage sebagai backup.');
                    }, 1500);
                })
                .catch(error => {
                    // Jika gagal, tetap tampilkan pesan sukses karena data sudah disimpan di localStorage
                    console.error('Error mengirim ke Google Forms:', error);
                    console.log('Data disimpan di localStorage sebagai backup:', submission);
                    
                    setTimeout(() => {
                        loadingOverlay.classList.remove('show');
                        successMessage.classList.add('show');
                        form.reset();
                        conditionalFields.classList.remove('show');
                        
                        // Scroll ke pesan sukses
                        successMessage.scrollIntoView({ behavior: 'smooth' });
                    }, 1500);
                });
            }
            
            // Fungsi untuk reset form
            resetFormBtn.addEventListener('click', function() {
                successMessage.classList.remove('show');
                form.reset();
                conditionalFields.classList.remove('show');
                document.getElementById('namaDayahSebelumnya').removeAttribute('required');
                document.getElementById('lamaMengaji').removeAttribute('required');
                
                // Scroll ke atas form
                document.querySelector('.form-container').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Set tanggal minimum dan maksimum untuk input tanggal lahir
            const today = new Date();
            const maxDate = new Date();
            maxDate.setFullYear(today.getFullYear() - 5); // Minimal usia 5 tahun
            const minDate = new Date();
            minDate.setFullYear(today.getFullYear() - 25); // Maksimal usia 25 tahun
            
            const tanggalLahirInput = document.getElementById('tanggalLahir');
            tanggalLahirInput.max = maxDate.toISOString().split('T')[0];
            tanggalLahirInput.min = minDate.toISOString().split('T')[0];
            
            // Beri placeholder yang jelas untuk tanggal lahir
            tanggalLahirInput.addEventListener('focus', function() {
                this.title = `Pilih tanggal lahir antara ${formatDate(minDate)} dan ${formatDate(maxDate)}`;
            });
            
            // Format tanggal untuk ditampilkan
            function formatDate(date) {
                const day = date.getDate().toString().padStart(2, '0');
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const year = date.getFullYear();
                return `${day}/${month}/${year}`;
            }
            
            // Tambahkan validasi real-time untuk WhatsApp
            document.getElementById('whatsapp').addEventListener('input', function() {
                const whatsappValue = this.value.trim();
                const validationMsg = document.getElementById('whatsappValidation');
                
                if (!whatsappValue) {
                    validationMsg.textContent = 'Nomor WhatsApp harus diisi';
                    validationMsg.classList.remove('show');
                } else if (!/^[0-9]{10,15}$/.test(whatsappValue)) {
                    validationMsg.textContent = 'Nomor WhatsApp harus berisi 10-15 digit angka';
                    validationMsg.classList.remove('show');
                } else {
                    validationMsg.classList.remove('show');
                }
            });
        });
    </script>
</body>
</html>
